<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mahjong â€¢ Windows Game</title>
    <style>
        :root {
            --black: #000000;
            --red: #DC2626;
            --green: #16A34A;
            --white: #FFFFFF;
            --light-gray: #F8FAFC;
            --green-tile: #166534;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', -apple-system, sans-serif;
            background: var(--white); color: var(--black);
            min-height: 100vh;
        }
        
        /* Green Tile Wall */
        #wall {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: repeating-linear-gradient(
                90deg, 
                transparent 0px, 
                transparent 48px,
                var(--green-tile) 48px,
                var(--green-tile) 50px,
                transparent 50px
            ),
            repeating-linear-gradient(
                0deg,
                transparent 0px,
                transparent 48px,
                var(--green-tile) 48px,
                var(--green-tile) 50px,
                transparent 50px
            ),
            linear-gradient(135deg, #ECFDF5 0%, #D1FAE5 100%);
            z-index: -1;
        }
        
        #header {
            background: rgba(0,0,0,0.05); padding: 20px; border-bottom: 3px solid var(--green);
            display: flex; justify-content: space-between; align-items: center;
        }
        h1 { 
            font-weight: 600; font-size: 28px; color: var(--black);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        #coins { 
            background: var(--green); color: white; padding: 12px 20px; 
            border-radius: 20px; font-weight: 600; font-size: 16px;
        }
        
        #main {
            max-width: 1200px; margin: 20px auto; padding: 20px;
            display: grid; grid-template-rows: auto 1fr auto;
        }
        
        #table {
            background: rgba(255,255,255,0.9); border-radius: 20px; 
            padding: 30px; border: 4px solid var(--green);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            display: grid; grid-template-areas: 
                "top    top    top"
                "left   center right"
                "bot    bot    bot";
            gap: 20px; min-height: 600px;
        }
        
        .player.top    { grid-area: top; }
        .player.right  { grid-area: right; }
        .player.bot    { grid-area: bot; }
        .player.left   { grid-area: left; }
        #center        { grid-area: center; }
        
        .player {
            background: white; border-radius: 16px; padding: 20px;
            border: 2px solid #E2E8F0; box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: all 0.2s;
        }
        .player:hover { transform: translateY(-2px); box-shadow: 0 12px 35px rgba(0,0,0,0.15); }
        
        .player.bot { 
            background: linear-gradient(145deg, #F0FDF4, white);
            border-color: var(--green); min-height: 200px;
        }
        
        .name { 
            font-weight: 600; font-size: 20px; margin-bottom: 16px;
            color: var(--black); text-align: center;
        }
        .bot .name { color: var(--green); }
        .robot .name { color: var(--red); }
        
        .hand {
            display: flex; flex-wrap: wrap; justify-content: center; gap: 8px;
            min-height: 90px; padding: 12px;
        }
        
        .tile {
            width: 45px; height: 60px; 
            background: linear-gradient(145deg, white, #F8FAFC);
            border: 2px solid #CBD5E1; border-radius: 8px;
            display: flex; align-items: center; justify-content: center;
            font-size: 26px; cursor: pointer; position: relative;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: all 0.2s;
        }
        .tile.back {
            background: linear-gradient(145deg, var(--green-tile), #15803D) !important;
            color: transparent !important; border-color: var(--green);
        }
        .tile.back::after { 
            content: 'ğŸ€„'; opacity: 0.8; font-size: 20px; 
            color: white; text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        .tile:hover:not(.back) { 
            transform: translateY(-3px); box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        .tile.selected { 
            border-color: var(--red) !important; 
            box-shadow: 0 0 0 3px rgba(220,38,38,0.3), 0 8px 25px rgba(0,0,0,0.3);
            transform: scale(1.1);
        }
        .tile.discard { 
            background: #F1F5F9; transform: rotate(5deg); 
            border-color: var(--red);
        }
        
        #center {
            background: white; border-radius: 16px; padding: 24px;
            border: 2px solid #E2E8F0; box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        #status { 
            font-size: 22px; font-weight: 600; margin-bottom: 20px; 
            color: var(--black); padding: 16px; 
            background: #F0FDF4; border: 2px solid var(--green);
            border-radius: 12px; text-align: center;
        }
        #discard-pile { 
            display: flex; flex-wrap: wrap; gap: 10px; justify-content: center;
            padding: 20px; background: #F8FAFC; border-radius: 12px;
            border: 1px solid #E2E8F0;
        }
        
        #controls {
            display: flex; gap: 16px; justify-content: center; padding: 24px;
            background: rgba(0,0,0,0.03); border-top: 3px solid var(--green);
            border-radius: 0 0 20px 20px;
        }
        button {
            padding: 14px 28px; border: 2px solid var(--black); 
            background: white; color: var(--black);
            border-radius: 10px; cursor: pointer; font-weight: 600;
            font-size: 16px; font-family: inherit; transition: all 0.2s;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        button:hover:not(:disabled) { 
            background: var(--green); color: white; 
            transform: translateY(-2px); box-shadow: 0 8px 20px rgba(22,163,74,0.3);
        }
        button:disabled { 
            background: #E2E8F0; color: #64748B; cursor: not-allowed;
            transform: none; box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        #shop {
            position: fixed; top: 20px; right: 20px; background: white;
            border: 2px solid var(--green); border-radius: 16px; padding: 24px;
            max-width: 320px; box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        #shop h3 { 
            font-weight: 600; font-size: 20px; margin-bottom: 20px; 
            color: var(--black); border-bottom: 2px solid var(--green);
            padding-bottom: 12px;
        }
        .shop-item { 
            display: flex; justify-content: space-between; align-items: center;
            padding: 16px; margin: 8px 0; background: #F8FAFC; 
            border-radius: 12px; border: 1px solid #E2E8F0;
        }
        .shop-item:hover { border-color: var(--green); }
        .shop-item button { 
            background: var(--green); color: white; border: none;
            padding: 10px 20px; border-radius: 8px; font-weight: 600;
        }
        
        @media (max-width: 768px) {
            #shop { position: static; margin: 0 -16px 20px; border-radius: 0; }
            #controls { flex-wrap: wrap; gap: 12px; }
            .tile { width: 38px; height: 52px; font-size: 22px; }
        }
    </style>
</head>
<body>
    <div id="wall"></div>
    
    <div id="shop">
        <h3>ğŸ›’ Mahjong Store</h3>
        <div class="shop-item">
            <div>
                <div style="font-weight: 600; color: var(--black);">Classic Tiles</div>
                <div style="font-size: 14px; color: #64748B;">Traditional design</div>
            </div>
            <button onclick="buyItem(1)">50 coins</button>
        </div>
        <div class="shop-item">
            <div>
                <div style="font-weight: 600; color: var(--black);">Premium Tiles</div>
                <div style="font-size: 14px; color: #64748B;">Luxury finish</div>
            </div>
            <button onclick="buyItem(2)">120 coins</button>
        </div>
    </div>
    
    <div id="header">
        <h1>ğŸ€„ Mahjong</h1>
        <div id="coins">ğŸ’° 150 coins</div>
    </div>
    
    <div id="main">
        <div id="table">
            <div class="player top robot">
                <div class="name">NORTH</div>
                <div class="hand" id="hand-north"></div>
            </div>
            
            <div class="player right robot">
                <div class="name">EAST</div>
                <div class="hand" id="hand-east"></div>
            </div>
            
            <div class="player bot">
                <div class="name">YOU</div>
                <div class="hand" id="hand-south"></div>
            </div>
            
            <div class="player left robot">
                <div class="name">WEST</div>
                <div class="hand" id="hand-west"></div>
            </div>
            
            <div id="center">
                <div id="status">Round 1 â€¢ Your turn</div>
                <div id="discard-pile"></div>
                <div style="margin-top: 16px; font-size: 14px; color: var(--black);">
                    Tiles left: <span id="tilesLeft">144</span>
                </div>
            </div>
        </div>
    </div>
    
    <div id="controls">
        <button onclick="discardSelected()" id="discardBtn" disabled>Discard Tile</button>
        <button onclick="sortHand()">Sort Hand</button>
        <button onclick="newRound()">New Round</button>
    </div>

    <script>
        const suits = {
            wan: ['ğŸ€‡','ğŸ€ˆ','ğŸ€‰','ğŸ€Š','ğŸ€‹','ğŸ€Œ','ğŸ€','ğŸ€','ğŸ€'],
            tong: ['ğŸ€™','ğŸ€š','ğŸ€›','ğŸ€œ','ğŸ€','ğŸ€','ğŸ€Ÿ','ğŸ€ ','ğŸ€¡'],
            tiao: ['ğŸ€','ğŸ€‘','ğŸ€’','ğŸ€“','ğŸ€”','ğŸ€•','ğŸ€–','ğŸ€—','ğŸ€˜']
        };
        
        let game = {
            wall: [], players: {south: [], east: [], north: [], west: []},
            discardPile: [], currentPlayer: 'south', selectedTile: null,
            round: 1, coins: 150, tilesLeft: 144
        };
        
        function createTileDeck() {
            let deck = [];
            for (let suit in suits) {
                for (let tile of suits[suit]) {
                    for (let i = 0; i < 4; i++) deck.push(tile);
                }
            }
            return shuffle(deck);
        }
        
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        function deal() {
            game.wall = createTileDeck();
            game.players = {south: [], east: [], north: [], west: []};
            game.discardPile = [];
            game.tilesLeft = 144;
            game.selectedTile = null;
            
            ['south', 'east', 'north', 'west'].forEach(player => {
                for (let i = 0; i < 16; i++) {
                    game.players[player].push(game.wall.pop());
                }
            });
            game.tilesLeft -= 64;
            
            renderAll();
            document.getElementById('status').textContent = 'Round 1 â€¢ Your turn';
            document.getElementById('discardBtn').disabled = false;
            updateCoins();
        }
        
        function renderAll() {
            renderHands();
            renderDiscardPile();
            updateUI();
        }
        
        function renderHands() {
            ['south', 'east', 'north', 'west'].forEach(player => {
                const handEl = document.getElementById(`hand-${player}`);
                handEl.innerHTML = '';
                game.players[player].forEach((tile, i) => {
                    const tileEl = document.createElement('div');
                    if (player === 'south') {
                        tileEl.className = 'tile';
                        tileEl.textContent = tile;
                        tileEl.onclick = () => selectTile(i);
                        if (game.selectedTile === i) tileEl.classList.add('selected');
                    } else {
                        tileEl.className = 'tile back';
                    }
                    handEl.appendChild(tileEl);
                });
            });
        }
        
        function renderDiscardPile() {
            const pileEl = document.getElementById('discard-pile');
            pileEl.innerHTML = '';
            game.discardPile.slice(-10).reverse().forEach(tile => {
                const tileEl = document.createElement('div');
                tileEl.className = 'tile discard';
                tileEl.textContent = tile;
                pileEl.appendChild(tileEl);
            });
        }
        
        function selectTile(index) {
            game.selectedTile = game.selectedTile === index ? null : index;
            renderHands();
        }
        
        function discardSelected() {
            if (game.selectedTile === null) return alert('Select a tile first!');
            
            const tile = game.players.south.splice(game.selectedTile, 1)[0];
            game.discardPile.push(tile);
            game.selectedTile = null;
            game.tilesLeft--;
            
            renderAll();
            document.getElementById('status').textContent = 'Robots thinking...';
            document.getElementById('discardBtn').disabled = true;
            
            setTimeout(robotRound, 800);
        }
        
        function robotRound() {
            const robots = ['east', 'north', 'west'];
            let i = 0;
            function nextRobot() {
                if (i >= robots.length) {
                    document.getElementById('status').textContent = `Round ${game.round} â€¢ Your turn`;
                    document.getElementById('discardBtn').disabled = false;
                    return;
                }
                const player = robots[i++];
                if (game.wall.length > 0) game.players[player].push(game.wall.pop());
                if (game.players[player].length > 0) {
                    const idx = Math.floor(Math.random() * game.players[player].length);
                    game.discardPile.push(game.players[player].splice(idx, 1)[0]);
                }
                game.tilesLeft--;
                renderAll();
                setTimeout(() => nextRobot(), 500);
            }
            nextRobot();
        }
        
        function sortHand() {
            game.players.south.sort();
            renderHands();
        }
        
        function newRound() {
            game.round = 1;
            game.coins += 15;
            deal();
        }
        
        function updateUI() {
            document.getElementById('tilesLeft').textContent = game.tilesLeft;
        }
        
        function updateCoins() {
            document.getElementById('coins').textContent = `ğŸ’° ${game.coins} coins`;
        }
        
        function buyItem(id) {
            const prices = [50, 120, 80];
            if (game.coins >= prices[id-1]) {
                game.coins -= prices[id-1];
                updateCoins();
                alert(`Purchased item ${id}!`);
            } else {
                alert('Not enough coins!');
            }
        }
        
        document.getElementById('discardBtn').onclick = discardSelected;
        deal();
    </script>
</body>
</html>
