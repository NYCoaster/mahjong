<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mahjong v23: Self-Gaung</title>
    <style>
        :root {
            /* FLUENT VARS */
            --mica: #f3f3f3; --surface: #ffffff; --text: #202020;
            --accent: #0078d4; --border: #e5e5e5;
            
            /* GAME VARS */
            --felt: #104a30; --wood: #5d4037;
            --tile-face: #fdfdfd; --tile-back: #005a9e; --tile-stroke: #ccc;
        }

        /* DARK THEME */
        body.skin-neon {
            --mica: #111; --surface: #1f1f1f; --text: #fff; --border: #333;
            --accent: #00f3ff; --felt: #050505; --wood: #333;
            --tile-face: #222; --tile-back: #111; --tile-stroke: #00f3ff;
        }
        body.skin-neon .tile svg { filter: drop-shadow(0 0 2px var(--accent)); }

        /* GOLD THEME */
        body.skin-gold {
            --mica: #2d2010; --surface: #3e2a18; --text: #ffd700; --border: #5d4037;
            --accent: #ffd700; --felt: #3e2723; --wood: #ffd700;
            --tile-face: #fff8e1; --tile-back: #b8860b; --tile-stroke: #daa520;
        }

        body {
            margin: 0; background: var(--mica); color: var(--text);
            font-family: 'Segoe UI Variable', sans-serif;
            height: 100vh; display: flex; overflow: hidden; user-select: none;
        }

        /* LAYOUT */
        #sidebar {
            width: 250px; background: var(--surface); border-right: 1px solid var(--border);
            display: flex; flex-direction: column; padding: 20px; gap: 8px; z-index: 100;
        }
        .nav-item {
            padding: 12px; border-radius: 6px; cursor: pointer; display: flex; gap: 12px;
            align-items: center; font-weight: 500; transition: 0.1s;
        }
        .nav-item:hover { background: rgba(128,128,128,0.1); }
        .nav-item.active { background: var(--accent); color: white; }

        #main { flex: 1; position: relative; display: flex; justify-content: center; align-items: center; }

        /* TABLE */
        #table {
            width: 96vmin; height: 96vmin; max-width: 900px; max-height: 900px;
            background: var(--felt); border: 15px solid var(--wood);
            border-radius: 20px; position: relative;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
        }

        /* TILE */
        .tile {
            background: var(--tile-face); border: 1px solid var(--tile-stroke);
            border-radius: 4px; display: flex; justify-content: center; align-items: center;
            position: relative; cursor: pointer; transition: transform 0.1s;
            box-shadow: 2px 3px 5px rgba(0,0,0,0.3);
        }
        .tile svg { width: 100%; height: 100%; display: block; }
        
        .tile-back {
            background: var(--tile-back); border: 1px solid rgba(255,255,255,0.2);
            border-radius: 3px;
        }

        .portrait { width: 42px; height: 56px; }
        .landscape { width: 56px; height: 42px; }

        /* ZONES */
        .zone { position: absolute; display: flex; gap: 2px; justify-content: center; align-items: center; }
        
        #p0 { bottom: 15px; left: 50%; transform: translateX(-50%); align-items: flex-end; width: 90%; height: 60px; }
        #p0 .tile:hover { transform: translateY(-15px); border-color: var(--accent); }
        
        #p2 { top: 15px; left: 50%; transform: translateX(-50%); width: 90%; height: 60px; flex-direction: row-reverse; }
        #p1 { right: 15px; top: 50%; transform: translateY(-50%); flex-direction: column-reverse; height: 80%; width: 60px; }
        #p3 { left: 15px; top: 50%; transform: translateY(-50%); flex-direction: column; height: 80%; width: 60px; }

        /* DISCARDS */
        #center {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 40%; height: 40%; border: 2px dashed rgba(255,255,255,0.1);
            border-radius: 12px; padding: 10px;
            display: grid; grid-template-columns: repeat(6, 1fr); gap: 4px;
            align-content: center; justify-content: center;
        }
        .discard-item { width: 30px; height: 40px; background: var(--tile-face); border-radius: 2px; }

        /* ACTIONS */
        #action-bar {
            position: absolute; bottom: 110px; left: 50%; transform: translateX(-50%);
            display: none; gap: 10px; z-index: 200;
            background: rgba(255,255,255,0.9); padding: 8px 16px; border-radius: 40px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        .act-btn {
            border: none; background: var(--surface); color: var(--text);
            padding: 8px 20px; border-radius: 20px; font-weight: bold; cursor: pointer;
            border: 1px solid var(--border); transition: 0.2s;
        }
        .act-btn:hover { background: var(--accent); color: white; transform: scale(1.05); }
        .btn-win { background: #d32f2f; color: white; border: none; }
    </style>
</head>
<body>
    <script>
        function initGame() {
            const deck = [];
            ['dots', 'bamboo', 'chars'].forEach(t => {
                for (let i = 1; i <= 9; i++) {
                    for (let k = 0; k < 4; k++) {
                        deck.push({ t, v: i });
                    }
                }
            });
            ['east', 'south', 'west', 'north', 'red', 'green', 'white'].forEach(v => {
                for (let k = 0; k < 4; k++) {
                    deck.push({ t: 'honor', v });
                }
            });

            console.log(deck); // Verifying deck integrity
        }
        initGame();
    </script>
</body>
</html>
