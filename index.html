<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Taiwan Mahjong (Working)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{
Â  margin:0;
Â  background:#111;
Â  font-family:sans-serif;
Â  display:flex;
Â  justify-content:center;
Â  align-items:center;
Â  height:100vh;
}
#table{
Â  width:90vmin;
Â  height:90vmin;
Â  background:#1b5e20;
Â  border:18px solid #4e342e;
Â  border-radius:20px;
Â  position:relative;
Â  padding:10px;
}
#hud{
Â  position:absolute;
Â  top:10px; left:10px;
Â  background:rgba(0,0,0,.5);
Â  color:#fff;
Â  padding:8px 12px;
Â  border-radius:8px;
Â  font-size:14px;
}
#hand{
Â  position:absolute;
Â  bottom:10px;
Â  left:50%;
Â  transform:translateX(-50%);
Â  display:flex;
}
.tile{
Â  width:42px;
Â  height:56px;
Â  background:#fffdf6;
Â  border-radius:6px;
Â  margin:2px;
Â  display:flex;
Â  align-items:center;
Â  justify-content:center;
Â  font-size:22px;
Â  font-family:"KaiTi","STKaiti",serif;
Â  box-shadow:0 5px 8px rgba(0,0,0,.5);
Â  cursor:pointer;
}
#controls{
Â  position:absolute;
Â  bottom:80px;
Â  left:50%;
Â  transform:translateX(-50%);
}
button{
Â  padding:6px 14px;
Â  font-size:14px;
Â  border:none;
Â  border-radius:6px;
Â  cursor:pointer;
}
</style>
</head>

<body>
<div id="table">
Â  <div id="hud">
Â  Â  ðŸª™ Coins: <b id="coins">0</b><br>
Â  Â  ðŸ§® Tai (last): <b id="tai">0</b>
Â  </div>

Â  <div id="controls">
Â  Â  <button onclick="win()">ðŸ€„ Declare Win</button>
Â  </div>

Â  <div id="hand"></div>
</div>

<script>
/* =====================
Â  Â TILE SET
Â  Â ===================== */
const tiles=[];
['è¬','ç´¢','ç­’'].forEach(s=>{
Â  for(let n=1;n<=9;n++){
Â  Â  for(let i=0;i<4;i++) tiles.push(n+s);
Â  }
});
['æ±','å—','è¥¿','åŒ—','ä¸­','ç™¼','ç™½'].forEach(h=>{
Â  for(let i=0;i<4;i++) tiles.push(h);
});

/* =====================
Â  Â GAME STATE
Â  Â ===================== */
let deck=[];
let hand=[];
let coins=0;
let lastTai=0;

const handEl=document.getElementById('hand');
const coinsEl=document.getElementById('coins');
const taiEl=document.getElementById('tai');

/* =====================
Â  Â INIT
Â  Â ===================== */
function init(){
Â  deck=[...tiles].sort(()=>Math.random()-0.5);
Â  hand=[];
Â  for(let i=0;i<16;i++) draw();
Â  render();
}

function draw(){
Â  if(deck.length) hand.push(deck.pop());
}

/* =====================
Â  Â TAI + WIN
Â  Â ===================== */
function calculateTai(){
Â  // simple, predictable Taiwan-style base
Â  let tai=1; Â  Â  Â  Â  Â  Â  Â // base win
Â  tai+=1; Â  Â  Â  Â  Â  Â  Â  Â  // dealer bonus (player is east)
Â  return tai;
}

function win(){
Â  lastTai=calculateTai();
Â  coins+=10+lastTai;
Â  coinsEl.textContent=coins;
Â  taiEl.textContent=lastTai;
Â  alert(`ðŸ€„ WIN!\nTai: ${lastTai}\nCoins gained: ${10+lastTai}`);
Â  init();
}

/* =====================
Â  Â RENDER
Â  Â ===================== */
function render(){
Â  handEl.innerHTML='';
Â  hand.forEach((t,i)=>{
Â  Â  const d=document.createElement('div');
Â  Â  d.className='tile';
Â  Â  d.textContent=t;
Â  Â  d.onclick=()=>{
Â  Â  Â  if(hand.length===17){
Â  Â  Â  Â  hand.splice(i,1);
Â  Â  Â  Â  draw();
Â  Â  Â  Â  render();
Â  Â  Â  }
Â  Â  };
Â  Â  handEl.appendChild(d);
Â  });
}

init();
</script>
</body>
</html>
